<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Modal analysis of a free-floating steel circle: three-dimensional solid model · FinEtoolsFlexStructuresTutorials.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">FinEtoolsFlexStructuresTutorials.jl</a></span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><a class="tocitem" href="tutorials.html">Tutorials</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="circle_3d_modal_conv_tut.html">Modal analysis of a free-floating steel circle: three-dimensional solid model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="circle_3d_modal_conv_tut.html">Modal analysis of a free-floating steel circle: three-dimensional solid model</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PetrKryslUCSD/FinEtoolsFlexStructuresTutorials.jl/blob/master/docs/src/tutorials/circle_3d_modal_conv_tut.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Modal-analysis-of-a-free-floating-steel-circle:-three-dimensional-solid-model"><a class="docs-heading-anchor" href="#Modal-analysis-of-a-free-floating-steel-circle:-three-dimensional-solid-model">Modal analysis of a free-floating steel circle: three-dimensional solid model</a><a id="Modal-analysis-of-a-free-floating-steel-circle:-three-dimensional-solid-model-1"></a><a class="docs-heading-anchor-permalink" href="#Modal-analysis-of-a-free-floating-steel-circle:-three-dimensional-solid-model" title="Permalink"></a></h1><p>Source code: <a href="circle_3d_modal_conv_tut.jl"><code>circle_3d_modal_conv_tut.jl</code></a></p><h2 id="Description"><a class="docs-heading-anchor" href="#Description">Description</a><a id="Description-1"></a><a class="docs-heading-anchor-permalink" href="#Description" title="Permalink"></a></h2><p>Vibration analysis of a free-floating steel ring. This is a benchmark from the NAFEMS Selected Benchmarks for Natural Frequency Analysis, publication: Test VM09: Circular Ring –  In-plane and Out-of-plane Vibration.</p><p>The results can be compared with analytical expressions, but the main purpose is to compute data for extrapolation to the limit to predict the true natural frequencies.</p><h2 id="Reference-frequencies"><a class="docs-heading-anchor" href="#Reference-frequencies">Reference frequencies</a><a id="Reference-frequencies-1"></a><a class="docs-heading-anchor-permalink" href="#Reference-frequencies" title="Permalink"></a></h2><p>There will be 6 rigid body modes (zero natural frequencies).</p><p>The numerical results are due to the publication: NAFEMS Finite Element Methods &amp; Standards, Abbassian, F., Dawswell, D. J., and Knowles, N. C. Selected Benchmarks for Natural Frequency Analysis, Test No.</p><ol><li>Glasgow: NAFEMS, Nov., 1987.</li></ol><p>The reference values were analytically determined (Blevins, FORMULAS FOR DYNAMICS, ACOUSTICS AND VIBRATION, Table 4.16). Note that shear flexibility was neglected when computing the reference values.</p><table><tr><th style="text-align: right">Mode</th><th style="text-align: right">Reference Value (Hz)</th><th style="text-align: right">NAFEMS Target Value (Hz)</th></tr><tr><td style="text-align: right">7, 8</td><td style="text-align: right">(out of plane)</td><td style="text-align: right">51.85</td></tr><tr><td style="text-align: right">9, 10</td><td style="text-align: right">(in plane)</td><td style="text-align: right">53.38</td></tr><tr><td style="text-align: right">11, 12</td><td style="text-align: right">(out of plane)</td><td style="text-align: right">148.8</td></tr><tr><td style="text-align: right">13, 14</td><td style="text-align: right">(in plane)</td><td style="text-align: right">151.0</td></tr><tr><td style="text-align: right">15, 16</td><td style="text-align: right">(out of plane)</td><td style="text-align: right">287.0</td></tr><tr><td style="text-align: right">17, 18</td><td style="text-align: right">(in plane)</td><td style="text-align: right">289.5</td></tr></table><h2 id="Goals"><a class="docs-heading-anchor" href="#Goals">Goals</a><a id="Goals-1"></a><a class="docs-heading-anchor-permalink" href="#Goals" title="Permalink"></a></h2><ul><li>Show convergence relative to reference values.</li><li>Compute data for extrapolation to the limit to predict the true natural frequencies.</li></ul><pre><code class="language-julia hljs">#</code></pre><h2 id="Definition-of-the-basic-inputs"><a class="docs-heading-anchor" href="#Definition-of-the-basic-inputs">Definition of the basic inputs</a><a id="Definition-of-the-basic-inputs-1"></a><a class="docs-heading-anchor-permalink" href="#Definition-of-the-basic-inputs" title="Permalink"></a></h2><p>The finite element code realize on the basic functionality implemented in this package.</p><pre><code class="language-julia hljs">using FinEtools
using FinEtoolsDeforLinear
using SymRCM
using Arpack</code></pre><p>The material parameters may be defined with the specification of the units. The elastic properties are:</p><pre><code class="language-julia hljs">E = 200.0 * phun(&quot;GPa&quot;)
nu = 0.3;</code></pre><p>The mass density is</p><pre><code class="language-julia hljs">rho = 8000 * phun(&quot;kg/m^3&quot;)</code></pre><p>The geometry consists of the radius of the circle, and the diameter of the circular cross-section.</p><pre><code class="language-julia hljs">radius = 1.0 * phun(&quot;m&quot;); diameter = 0.1 * phun(&quot;m&quot;);</code></pre><p>We shall calculate these eigenvalues, but we are mostly interested in the first three  natural frequencies.</p><pre><code class="language-julia hljs">neigvs = 18;</code></pre><p>The mass shift needs to be applied since the structure is free-floating.</p><pre><code class="language-julia hljs">oshift = (2*pi*15)^2</code></pre><p>We will generate this many elements per radius of the cross-section, and along the length of the circular ring.</p><pre><code class="language-julia hljs">results = let
    results = []
    for i in 1:3
        nperradius, nL = 2^i, 20*2^i
        tolerance = diameter/nperradius/100</code></pre><p>Generate the mesh in a straight cylinder.</p><pre><code class="language-julia hljs">        fens, fes = H8cylindern(diameter/2, 2*pi, nperradius, nL)</code></pre><p>Select the nodes in the bases of the cylinder for future merging of the nodes.</p><pre><code class="language-julia hljs">        z0l = selectnode(fens, plane = [0, 0, 1, 0], inflate = tolerance)
        z2l = selectnode(fens, plane = [0, 0, 1, 2*pi], inflate = tolerance)</code></pre><p>Twist the straight cylinder into a ring.</p><pre><code class="language-julia hljs">        for i in 1:count(fens)
            a = fens.xyz[i, 3]
            x = fens.xyz[i, 1]
            y = fens.xyz[i, 2] + radius
            fens.xyz[i, :] .= (x, y*cos(a), y*sin(a))
        end</code></pre><p>Merge the nodes of the bases, which involves renumbering the connectivity.</p><pre><code class="language-julia hljs">        fens, fes = mergenodes(fens, fes, tolerance, vcat(z0l, z2l))</code></pre><p>If desired, visualize the mesh. File = &quot;ring.vtk&quot; vtkexportmesh(File, fens, fes) @async run(<code>&quot;paraview.exe&quot; $File</code>)</p><p>Generate the material and the FEM machine.</p><pre><code class="language-julia hljs">        MR = DeforModelRed3D
        material = MatDeforElastIso(MR, rho, E, nu, 0.0)
        femm = FEMMDeforLinearESNICEH8(MR, IntegDomain(fes, NodalTensorProductRule(3)), material)</code></pre><p>Set up the nodal fields for the geometry in the displacements.</p><pre><code class="language-julia hljs">        geom = NodalField(fens.xyz)
        u = NodalField(zeros(size(fens.xyz,1),3)) # displacement field</code></pre><p>Renumber the nodes to produce quicker linear equation solves.</p><pre><code class="language-julia hljs">        p = let
            C = connectionmatrix(femm, count(fens))
            p = symrcm(C)
        end
        numberdofs!(u, p)</code></pre><p>Now set up the discrete model.</p><pre><code class="language-julia hljs">        associategeometry!(femm,  geom)
        K  = stiffness(femm, geom, u)
        M = mass(femm, geom, u)</code></pre><p>Solve the free vibration problem.</p><pre><code class="language-julia hljs">        evals, evecs, nconv = eigs(K+oshift*M, M; nev=neigvs, which=:SM, explicittransform = :none)</code></pre><p>Correct for the mass shift.</p><pre><code class="language-julia hljs">        evals = evals .- oshift;
        sigdig(n) = round(n * 10000) / 10000
        fs = real(sqrt.(complex(evals)))/(2*pi)
        println(&quot;Eigenvalues: $(sigdig.(fs)) [Hz]&quot;)
        push!(results, (fs[6+1], fs[6+3], fs[6+5]))
    end
    results # return these values from the block
end

@show results

#</code></pre><h2 id="Richardson-extrapolation"><a class="docs-heading-anchor" href="#Richardson-extrapolation">Richardson extrapolation</a><a id="Richardson-extrapolation-1"></a><a class="docs-heading-anchor-permalink" href="#Richardson-extrapolation" title="Permalink"></a></h2><p>Here we will use Richardson extrapolation from the three sets of data. This will allow us to predict the convergence rate and the true solution for each of the three frequencies (or rather the pairs of frequencies, 7 and 8, 9 and 10, and 11 and 12).</p><p>We will immediately set up the convergence plots. We will extrapolate and then compute from that the normalized error to be plotted with respect to the refinement factors (which in this case are 4, 2, and 1). We use the refinement factor as a convenience: we will calculate the element size by dividing the circumference of the ring with a number of elements generated circumferentially.</p><pre><code class="language-julia hljs">using FinEtools.AlgoBaseModule: richextrapol

using Gnuplot
@gp  &quot;set terminal windows 0 &quot;  :-</code></pre><p>Modes 7 and 8</p><pre><code class="language-julia hljs">sols = [r[1] for r in results]
resextrap = richextrapol(sols, [4.0, 2.0, 1.0])
print(&quot;Predicted frequency 7 and 8: $(resextrap[1])\n&quot;)
errs = abs.(sols .- resextrap[1])./resextrap[1]
@gp  :- 2*pi*radius./[80, 160, 320] errs &quot; lw 2 lc rgb &#39;red&#39; with lp title &#39;Mode 7, 8&#39; &quot;  :-</code></pre><p>Modes 9 and 10</p><pre><code class="language-julia hljs">sols = [r[2] for r in results]
resextrap = richextrapol(sols, [4.0, 2.0, 1.0])
print(&quot;Predicted frequency 9 and 10: $(resextrap[1])\n&quot;)
errs = abs.(sols .- resextrap[1])./resextrap[1]
@gp  :- 2*pi*radius./[80, 160, 320] errs &quot; lw 2 lc rgb &#39;green&#39; with lp title &#39;Mode 9, 10&#39; &quot;  :-</code></pre><p>Modes 11 and 12</p><pre><code class="language-julia hljs">sols = [r[3] for r in results]
resextrap = richextrapol(sols, [4.0, 2.0, 1.0])
print(&quot;Predicted frequency 11 and 12: $(resextrap[1])\n&quot;)
errs = abs.(sols .- resextrap[1])./resextrap[1]
@gp  :- 2*pi*radius./[80, 160, 320] errs &quot; lw 2 lc rgb &#39;blue&#39; with lp title &#39;Mode 11, 12&#39; &quot;  :-

@gp  :- &quot;set xrange [0.01:0.1]&quot; &quot;set logscale x&quot; :-
@gp  :- &quot;set logscale y&quot; :-
@gp  :- &quot;set xlabel &#39;Element size&#39;&quot; :-
@gp  :- &quot;set ylabel &#39;Normalized error [ND]&#39;&quot; :-
@gp  :- &quot;set title &#39;3D: Convergence of modes 7, ..., 12&#39;&quot;</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Friday 14 January 2022 04:16">Friday 14 January 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
